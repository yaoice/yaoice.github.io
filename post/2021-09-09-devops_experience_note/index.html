<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    <meta property="og:site_name" content="爱折腾的工程师">
    <meta property="og:type" content="article">

    
    <meta property="og:image" content="https://www.iceyao.com.cn//img/post-bg-unix-linux.jpg">
    <meta property="twitter:image" content="https://www.iceyao.com.cn//img/post-bg-unix-linux.jpg" />
    

    
    <meta name="title" content="DevOps产品体验" />
    <meta property="og:title" content="DevOps产品体验" />
    <meta property="twitter:title" content="DevOps产品体验" />
    

    
    <meta name="description" content="iceyao，程序员, 开源爱好者，生活探险家 | 这里是iceyao的博客，与你一起发现更大的世界。">
    <meta property="og:description" content="iceyao，程序员, 开源爱好者，生活探险家 | 这里是iceyao的博客，与你一起发现更大的世界。" />
    <meta property="twitter:description" content="iceyao，程序员, 开源爱好者，生活探险家 | 这里是iceyao的博客，与你一起发现更大的世界。" />
    

    
    <meta property="twitter:card" content="summary" />
    
    

    <meta name="keyword"  content="iceyao, IceYao&#39;s Blog, 博客, 个人网站, 互联网, Web, 云原生, PaaS, Istio, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>DevOps产品体验 | 爱折腾的工程师 | IceYao&#39;s Blog</title>

    <link rel="canonical" href="/post/2021-09-09-devops_experience_note/">

    

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hugo-theme-cleanwhite.min.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">

    
    

    
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>

    
    <script src="/js/hux-blog.min.js"></script>

    
    <script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script>

    
    

</head>



  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-9J7CKFVPPM"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-9J7CKFVPPM');
        }
      </script>
    
  







<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">爱折腾的工程师</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">All Posts</a>
                    </li>
                    
                        
                    
                    
		    
                        <li><a href="/archive//">ARCHIVE</a></li>
                    
                        <li><a href="/notes//">NOTES</a></li>
                    
                        <li><a href="/about//">ABOUT</a></li>
                    
		            <li>
                        <a href="/search"><i class="fa fa-search"></i></a>
		           </li>
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header {
        background-image: url('/img/post-bg-unix-linux.jpg')
    }
</style>

<header class="intro-header" >

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/devops" title="DevOps">
                            DevOps
                        </a>
                        
                    </div>
                    <h1>DevOps产品体验</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        
                            Posted by 
                            
                                    爱折腾的工程师
                             
                            on 
                            Thursday, September 9, 2021
                            
                            
                            
                            
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                
                <h1 id="1-选型对比">1. 选型对比</h1>
<h2 id="11-erda-devops">1.1 Erda DevOps</h2>
<h3 id="111-简介">1.1.1 简介</h3>
<blockquote>
<p>Erda 是新一代数字化云原生 PaaS 平台，其核心包含三大模块：应用（微服务）研发治理平台、快数据治理平台和混合云管理平台。</p>
</blockquote>
<ul>
<li>应用（微服务）研发治理平台具备项目管理、API 管理、CI/CD、自动化测试、应用管理、监控、日志分析、APM 和微服务观测等核心功能，从项目需求到上线交付，实现真正的一站式全流程管理。</li>
<li>快数据治理平台采用流批一体的架构设计，基于实时的数据计算，提供数据源管理、数据地图、数据模型开发、数据资产、数据血缘等一体化的数据治理能力，可应用于数据中台建设、实时数据仓库建设等场景。</li>
<li>混合云管理平台基于 Kubernetes（K8s）架构的容器云服务，提供 K8s 的可视化管理、常见公有云的资源管理和编排，以及立体式的智能监控告警，能够将应用部署到不同的云平台，实现混合云架构。</li>
</ul>
<p>
  <img src="/img/posts/2021-09-09/erda%e6%9e%b6%e6%9e%84%e5%9b%be.png" alt="">

</p>
<h3 id="112-场景">1.1.2 场景</h3>
<h4 id="1121-业务项目管理">1.1.2.1 业务项目管理</h4>
<p>Devops 平台管理一个需求从设计到开发上线的完整生命周期。</p>
<p>迭代可分为以下几个阶段：</p>
<ol>
<li>需求设计</li>
<li>开发
<ul>
<li>任务分发</li>
<li>API 设计</li>
<li>开发实现</li>
</ul>
</li>
<li>提测</li>
<li>上线</li>
<li>简单监控</li>
<li>迭代质量</li>
</ol>
<p>
  <img src="/img/posts/2021-09-09/%e4%b8%9a%e5%8a%a1%e9%a1%b9%e7%9b%ae%e7%ae%a1%e7%90%86.png" alt="">

</p>
<h4 id="1122-基于-git-源码部署">1.1.2.2 基于 Git 源码部署</h4>
<pre tabindex="0"><code>准备示范代码 -&gt;定义流水线 -&gt; 执行流水线 -&gt; 查看部署结果
</code></pre><h4 id="1123-基于-docker-image-部署">1.1.2.3 基于 Docker Image 部署</h4>
<p>基于 Docker Image 部署本质上和 <a href="https://docs.erda.cloud/1.2/manual/dop/examples/deploy/deploy-from-git.html">基于 Git 源码部署</a> 相同，
区别在于前者不需要源码构建Image产物。</p>
<h4 id="1124-部署一个-go-web-程序">1.1.2.4 部署一个 Go Web 程序</h4>
<h4 id="1125--更灵活地自定义构建-java-应用">1.1.2.5  更灵活地自定义构建 Java 应用</h4>
<ul>
<li>Maven 构建</li>
<li>Gradle 构建</li>
<li>Tomcat 构建</li>
</ul>
<h4 id="1126-使用缓存加速构建">1.1.2.6 使用缓存加速构建</h4>
<ul>
<li>Java 缓存</li>
<li>JS 缓存</li>
<li>其他语言缓存</li>
</ul>
<h4 id="1127-使用-nexus-加速构建">1.1.2.7 使用 Nexus 加速构建</h4>
<ul>
<li>推送 JAR 包至私服（Maven）</li>
<li>推送 JAR 包至私服（Gradle）</li>
</ul>
<h4 id="1128-如何管理镜像">1.1.2.8 如何管理镜像</h4>
<ul>
<li>通过 dockerfile 构建镜像</li>
<li>通过 docker push 推送镜像</li>
<li>通过 docker pull 拉取镜像</li>
<li>自定义命令推送或拉取镜像</li>
</ul>
<h3 id="113-概念">1.1.3 概念</h3>
<p>![](/img/posts/2021-09-09/Erda DevOps.png)</p>
<h3 id="114-设计理念">1.1.4 设计理念</h3>
<h4 id="1141-高效协同">1.1.4.1 高效协同</h4>
<p>平台自带研发协作的事件管理，主要包含产品待办事项（Product Backlog）、迭代计划（Sprint）、迭代任务（Sprint Backlog）、缺陷（Bug）等。</p>
<p>
  <img src="/img/posts/2021-09-09/%e9%ab%98%e6%95%88%e5%8d%8f%e5%90%8c.png" alt="">

</p>
<h4 id="1142-iac">1.1.4.2 IaC</h4>
<p>IaC（Infrastructure as Code），即基础设施即代码。</p>
<p>在服务上云的大趋势下，基础设施的概念已不再局限于 IaaS 层。云原生时代，开发者的焦点逐渐聚集到了应用上，即以应用为中心。持续集成、持续部署和 DevOps 概念的广泛推行和接受，
要求产品团队对部署和运维具备更高的自主性。一个开发工程师若仅是把代码写好，是远远不够的，充其量完成了 Dev。
而真正的软件交付生命周期，从 Ops 开始，运维工程师已不再负责应用的部署和运维，这些都是开发者的份内之事。</p>
<p>Erda可以通过 pipeline.yml 定义应用的 CI/CD 全流程，而 pipeline.yml 即该应用基础设施的一部分。
同时，您需要以一个声明式的 erda.yml 描述应用微服务架构，包括微服务之间的依赖关系、对中间件的依赖等。</p>
<p>当这些 Infrastructure 都被作为 Code 提交之后，Erda 平台便可以根据这些配置，进行持续集成和持续交付，最终自动把应用完整部署起来。</p>
<p>erda.yml 部分内容示意如下：</p>
<p>
  <img src="/img/posts/2021-09-09/erda_yaml.png" alt="">

</p>
<p>用于 CI 的 pipeline.yml 部分内容示意如下：</p>
<p>
  <img src="/img/posts/2021-09-09/ci-erda.png" alt="">

</p>
<h4 id="1143-pipelineyaml">1.1.4.3 pipeline.yaml</h4>
<p>Erda Pipeline 是由端点自研、用 Go 编写的一款企业级流水线服务。</p>
<p>pipeline架构</p>
<p>
  <img src="/img/posts/2021-09-09/pipeline%e6%9e%b6%e6%9e%84.png" alt="">

</p>
<p>Pipeline 支持 UI、OPENAPI、CLI 等多种交互方式，同时支持水平扩展，保证高可用，并可将其划分为服务层、核心层和引擎层。</p>
<p>服务层</p>
<ul>
<li>yaml parser 解析流程定义文件，支持灵活的变量语法，例如上下文值引用 <code>${{ outputs.preTaskName.key }}</code>，配置管理引用 <code>${{ configs.key }}</code> 等。</li>
<li>对接扩展市场获取扩展能力。</li>
</ul>
<p>核心层</p>
<ul>
<li>Cron 守护进程。</li>
<li>EventManager 抽象内部事件发送，使用适配器模式解耦监控指标上报、发送 WS 消息、支持 Webhook 等。</li>
<li>AOP 扩展点机制（借鉴 Spring），暴露代码关键节点，便于开发同学在不修改核心代码的前提下定制流水线行为。</li>
</ul>
<p>引擎层</p>
<ul>
<li>流程推进器（Reconciler）</li>
<li>优先队列管理器</li>
<li>任务执行器插件机制（ActionExecutor插件机制）</li>
</ul>
<p>在引擎侧，pipeline.yaml 被解析为 DAG（Directed Acyclic Graph，有向无环图）结构后被推进。</p>
<p>中间件依赖</p>
<ul>
<li>使用 MySQL 做数据持久化。</li>
<li>使用 etcd watch 功能实现多实例状态同步以及分布式锁。</li>
<li>使用 etcd key ttl 实现数据 defer GC。</li>
</ul>
<p>Pipeline 作为技术底座，可向上支撑：</p>
<ul>
<li>DevOps：CI/CD 场景，包括 Erda 自身的持续集成和 Release 版本发布。</li>
<li>快数据：工作流编排，流批一体，支持工作流优先级队列，保证高优先级数据任务必须执行。</li>
<li>自动化测试：测试流程编排，API（出参、断言）、数据银行等不同类型的任务统一编排。</li>
<li>SRE 集群运维链路。</li>
<li>提供无限扩展：基于 ActionExecutor 扩展机制和扩展市场。</li>
</ul>
<p>
  <img src="/img/posts/2021-09-09/pipeline%e6%8a%80%e6%9c%af%e5%ba%95%e5%ba%a7.png" alt="">

</p>
<p>在 Pipeline 中，平台对一个任务执行的抽象是 ActionExecutor，一个执行器只需实现单个任务的创建、启动、更新、状态查询、删除等基础方法，
即可注册成为一个 ActionExecutor。恰当的任务执行器抽象，使得 Batch/Streaming/InMemory Job 的配置和使用方式完全一致，批流一体，
对使用者屏蔽底层细节，做到无感知切换。在同一条流水线中，可以混用各种 ActionExecutor。</p>
<p>调度时，Pipeline 根据任务类型和集群信息，将任务调度至对应的任务执行器上。</p>
<h4 id="1144-erdayaml">1.1.4.4 erda.yaml</h4>
<p>平台通过让开发者声明的方式，描述微服务运行的整体环境，并将该声明转化成环境搭建的过程。</p>
<p>
  <img src="/img/posts/2021-09-09/one_yaml.png" alt="">

</p>
<p>YAML 文件的声明可分为两部分：</p>
<ul>
<li>微服务声明，包括微服务数量，以及各微服务所需的资源、副本个数、端口、环境变量，甚至对外网关的域名、网关的转发设置。</li>
<li>扩展服务设置，即 Addon。开发者只需声明应用涉及的 Addon，例如 MySQL，指明 MySQL 的规格、版本即可，平台将自动为应用创建 MySQL，并将其配置通过环境变量的方式传递给微服务。同时 Addon 是可扩展的，通过这一开放的方式，您几乎可以将所有中间件集成进平台。</li>
</ul>
<p>erda yaml vs k8s yaml区别？</p>
<p>
  <img src="/img/posts/2021-09-09/one_yaml_vs_k8s_yaml.png" alt="">

</p>
<p>通过 erda.yml 文件，开发者在中心平台经过验证的部署过程，无需修改，即可同时适配至客户环境，为一键部署打下基础。</p>
<h4 id="1145-gitflow">1.1.4.5 Gitflow</h4>
<p>Gitflow 即 Git 工作流，有助于持续软件开发和实施 DevOps 实践，其概念由文森特·德里森在 nvie (opens new window)首次提出并广受欢迎。
Gitflow 定义了围绕项目发布设计的严格分支模型，适用于有计划的发布周期项目和持续交付。</p>
<p>标准的 Gitflow 示例如下：

  <img src="/img/posts/2021-09-09/%e6%a0%87%e5%87%86gitflow.png" alt="">

</p>
<p>Gitflow 完整工作流程如下：</p>
<ol>
<li>develop 分支从 master 分支切出。</li>
<li>release 分支从 develop 分支切出。</li>
<li>feature 分支从 develop 分支切出。</li>
<li>当 feature 分支完成时，合并至 develop 分支。</li>
<li>当 release 分支完成时，合并至 develop 分支和 master 分支。</li>
<li>若 master 检测到问题，则会从 master 分支切出 hotfix 分支。</li>
<li>当 hotfix 分支完成时，合并至 develop 分支和 master 分支。</li>
</ol>
<ul>
<li>
<p>develop/master分支：</p>
<p>标准的 Gitflow 使用两个分支记录项目的演进历史。其中 master 分支记录正式发布记录，develop 记录演进历程。
develop 分支和各个 feature 分支进行交互：feature 分支不断集成到 develop 分支，develop 分支则不断切出分支作为新的 feature 分支基线。</p>
<p>master 分支可通过 tag 标记版本，并以 tag 为节点发布至生产环境。</p>
</li>
<li>
<p>feature分支：</p>
<p>任何 feature 理应有一个自己的 feature 分支，不同 feature 不能混用同一分支。</p>
<p>feature 分支需以最新的 develop 分支为基线，完成开发后，再合并回 develop 分支中。feature 分支不会与 master 分支产生关联。</p>
</li>
<li>
<p>release分支</p>
<p>当 develop 分支中集成了一定量的 feature 或预定的发布日期临近时，即可考虑发版了。
发版是从 develop 分支切出一个 release 分支，同时表示本 release 周期已结束，并开启了下一个 release 周期。此后所有新的 feature 都不会体现在这个已 release 的分支上，只会集成至 develop 并最终切到下一个 release 分支。</p>
<p>release 分支上的修改仅限于缺陷修复、自动化工具生成的文档等，不允许出现新的 feature。</p>
<p>对于 release 分支上的缺陷修复，应切出新的分支进行问题修复并验证，之后再合并回该 release 和 develop 分支。</p>
<p>release 分支可以合并到 master 分支并打上对应 tag ，然后删除release 分支。</p>
</li>
<li>
<p>hotfix分支</p>
<p>hotfix 分支用以快速修复生产上的问题。当生产线上出现问题并定位后，从对应 tag 的 master 分支切出 hotfix 分支，解决问题并验证后，
hotfix 分支需合并回 master 和 develop 分支，并在 master 分支上 tag。</p>
</li>
</ul>
<h3 id="115-借鉴">1.1.5 借鉴</h3>
<ul>
<li>组织-&gt;项目-&gt;应用的层级结构，每个层级对应不同的角色（Erda角色权限：https://erda.cloud/test12345/perm?scope=app），配额作用在项目</li>
<li>DevOps全家桶</li>
<li>有个理念，<strong>不同分支对应到不同的部署环境和制品部署环境</strong>（如feature分支对应DEV部署/制品部署环境，develop分支对应TEST部署/制品部署环境）</li>
</ul>
<h3 id="116-vs-ops发布流程">1.1.6 VS OPS发布流程</h3>
<ol>
<li>
<p>OPS有环境的概念，实际上环境也是对应集群，OPS的多环境实质上是对应一个集群的多个命名空间</p>
<p>Erda devops是不同分支对应不同的部署环境和制品部署环境（4个固定环境：生产环境、预发环境、测试环境、开发环境）</p>
</li>
<li>
<p>审批流程差异</p>
<ul>
<li>OPS: dev环境 -&gt; qa环境 -&gt; uat环境 -&gt; 审批(dev审批人、qa审批人、现在审批人) -&gt; live环境</li>
<li>Erda DevOps：是否审批 -&gt; feature分支 -&gt; 是否审批-&gt;  devlop分支 -&gt; 是否审批 -&gt; release分支 -&gt; 是否审批 -&gt; master分支（待确认？）</li>
</ul>
</li>
<li>
<p>管理层级不一样，OPS是项目的概念，Erda devops有组织、项目、应用的概念</p>
</li>
</ol>
<h2 id="12-kubesphere-devops">1.2 Kubesphere DevOps</h2>
<h3 id="121-简介">1.2.1 简介</h3>
<blockquote>
<p>KubeSphere DevOps 提供基于 Jenkins 的 CI/CD 流水线，支持自动化工作流，包括 Binary-to-Image (B2I) 和 Source-to-Image (S2I) 等，
帮助不同的组织加快产品上市时间。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/kubesphere%e6%b5%81%e6%b0%b4%e7%ba%bf.png" alt="">

</p>
<p>流水线支持Git、GitHub、Gitlab、SVN、以及Bitbucket代码仓库</p>
<h3 id="122-案例">1.2.2 案例</h3>
<h4 id="1221-source-to-image">1.2.2.1 Source to Image</h4>
<p>
  <img src="/img/posts/2021-09-09/source_to_image.png" alt="">

</p>
<ul>
<li><a href="https://v2-1.docs.kubesphere.io/docs/zh-CN/quick-start/source-to-image/">Source to Image</a></li>
</ul>
<h4 id="1222-基于spring-boot项目构建流水线">1.2.2.2 基于Spring Boot项目构建流水线</h4>
<ul>
<li><a href="https://v2-1.docs.kubesphere.io/docs/zh-CN/quick-start/devops-online">基于Spring Boot项目构建流水线</a></li>
</ul>
<h4 id="1223-图形化构建流水线-jenkinsfile-out-of-scm">1.2.2.3 图形化构建流水线 (Jenkinsfile out of SCM)</h4>
<ul>
<li><a href="https://v2-1.docs.kubesphere.io/docs/zh-CN/quick-start/jenkinsfile-out-of-scm">Jenkinsfile out of SCM</a></li>
</ul>
<h3 id="123-概念">1.2.3 概念</h3>
<p>![](/img/posts/2021-09-09/KubeSphere DevOps.png)</p>
<h3 id="124-借鉴">1.2.4 借鉴</h3>
<ol>
<li><strong>动态构建 jenkins slave，根据需要自动创建 Pod</strong>（解决并发构建问题）；KubeSphere 的 CI/CD 是基于底层 Kubernetes 的动态 Jenkins Slave，也就是说 Jenkins Slave 具有动态伸缩的能力，能够根据任务的执行状态进行动态创建或自动注销释放资源。实际上，Jenkins Master 和 Jenkins Slave 以 Pod 形式运行在 KubeSphere 集群的 Node 上，Master 运行在其中一个节点，并且将其配置数据存储到一个 Volume 中，Slave 运行在各个节点上，并且它不是一直处于运行状态，它会按照需求动态的创建并自动删除。</li>
<li>可创建 CI/CD 流水线且无需编写 Jenkinsfile</li>
<li>支持依赖项缓存，加快构建和部署</li>
<li>Source-to-Image 从源代码构建可再现容器镜像，无需编写 Dockerfile</li>
<li>Binary-to-image 将制品自动构建成可运行镜像</li>
</ol>
<h3 id="125-vs-ops发布流程">1.2.5 VS OPS发布流程</h3>
<ol>
<li>
<p>OPS有环境的概念，实际上环境也是对应集群，OPS的多环境实质上是对应一个集群的多个命名空间</p>
<p>KubeSphere devops cd的时候可部署不同的集群和不同的命名空间（</p>
</li>
<li>
<p>审批流程差异</p>
<ul>
<li>OPS: dev环境 -&gt; qa环境 -&gt; uat环境 -&gt; 审批(dev审批人、qa审批人、现在审批人) -&gt; live环境</li>
<li>KubeSphere：人工确认 -&gt; dev集群 -&gt; 人工确认-&gt; qa集群 -&gt; 人工确认 -&gt; uat集群 -&gt; 人工确认 -&gt; live集群</li>
<li>KubeSphere：人工确认 -&gt; 集群(dev命名空间) -&gt; 人工确认-&gt; 集群(qa命名空间) -&gt; 人工确认 -&gt; 集群(uat命名空间) -&gt; 人工确认 -&gt; 集群(live命名空间)</li>
</ul>
</li>
<li>
<p>管理层级不一样，OPS是项目的概念，KubeSphere devops有企业空间、DevOps工程的概念</p>
</li>
</ol>
<h2 id="13-coding-devops">1.3 CODING DevOps</h2>
<h3 id="131-简介">1.3.1 简介</h3>
<blockquote>
<p>CODING DevOps 面向容器业务场景，提供代码编译、容器镜像构建、镜像推送及应用部署等功能，
与容器服务 TKE、容器镜像服务 TCR 紧密结合，共同提供强大的云原生 DevOps 服务。</p>
</blockquote>
<p>CODING DevOps的子产品：</p>
<p>
  <img src="/img/posts/2021-09-09/coding_devops%e5%ad%90%e4%ba%a7%e5%93%81.png" alt="">

</p>
<h3 id="132-业务流程">1.3.2 业务流程</h3>
<p>
  <img src="/img/posts/2021-09-09/coding%e4%b8%9a%e5%8a%a1%e6%b5%81%e7%a8%8b.png" alt="">

</p>
<h3 id="133-功能特性">1.3.3 功能特性</h3>
<h4 id="1331-持续构建">1.3.3.1 持续构建</h4>
<ul>
<li>兼容 Jenkins 使用方式，可提供 Jenkinsfile 完整定义编译构建流程</li>
<li>支持 CODING、GitHub、GitLab、私有 GitLab，码云主流源代码托管平台</li>
<li>支持持续构建模板，可根据业务类型快速配置编译构建流程</li>
</ul>
<h4 id="1332-镜像托管分发">1.3.3.2 镜像托管分发</h4>
<ul>
<li>云上独享 Docker Registry 服务，同时支持 Helm Chart 托管</li>
<li>支持公网及私有网络访问控制，支持仓库级细颗粒度操作权限控制</li>
<li>支持 Webhook 触发器、镜像安全扫描、跨地域同步，灵活接入企业内已有发布系统，保障部署安全</li>
</ul>
<h4 id="1333-持续部署">1.3.3.3 持续部署</h4>
<ul>
<li>兼容 Spinnaker 使用方式，支持蓝绿发布、金丝雀发布等多种发布策略</li>
<li>支持直接部署至容器服务 TKE 集群，同时兼容标准集群、弹性集群、边缘集群</li>
<li>同时提供简单易用的交付工作流及强大的原生 Spinnaker 使用方式，满足客户不同场景的使用需求</li>
</ul>
<h3 id="134-应用场景">1.3.4 应用场景</h3>
<h4 id="1341-敏捷开发实践">1.3.4.1 敏捷开发实践</h4>
<blockquote>
<p>从用户故事开始，到需求池管理以及任务拆解、缺陷管理、测试管理，敏捷开发过程都有序建立。
帮助企业以最低的预算、最快速的迭代方式验证产品版本投入市场的效果。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e6%95%8f%e6%8d%b7%e5%bc%80%e5%8f%91%e5%ae%9e%e8%b7%b5.png" alt="">

</p>
<h4 id="1342-瀑布流开发实践">1.3.4.2 瀑布流开发实践</h4>
<blockquote>
<p>CODING DevOps 涵盖了从需求规划、开发计划、需求评审、开发测试、持续部署整个研发生命周期的管理，满足不同规模团队的瀑布式研发模式，
让项目严格按计划流程推进，有效控制项目风险。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e7%80%91%e5%b8%83%e6%b5%81%e5%bc%80%e5%8f%91%e5%ae%9e%e8%b7%b5.png" alt="">

</p>
<h4 id="1343-devops-自动化实践">1.3.4.3 DevOps 自动化实践</h4>
<blockquote>
<p>CODING DevOps 提供持续集成到自动部署的全过程工具：自动构建、自动化测试、制品库、持续部署。
支撑项目的快速迭代，保证软件稳定、持续构建发布。实现 DevOps 持续交付全流程应用。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/DevOps%e8%87%aa%e5%8a%a8%e5%8c%96%e5%ae%9e%e8%b7%b5.png" alt="">

</p>
<h3 id="135-coding-持续集成">1.3.5 CODING 持续集成</h3>
<h4 id="1351-coding-持续集成简介">1.3.5.1 CODING 持续集成简介</h4>
<blockquote>
<p>CODING 持续集成（CODING Continuous Integration，CODING-CI）全面兼容 Jenkins 的持续集成服务，
支持 Java、Python、NodeJS 等所有主流语言，并且支持 Docker 镜像的构建。图形化编排，高配集群多 Job 并行构建全面提速您的构建任务。
支持主流的 Git 代码仓库，包括 CODING 代码托管、GitHub、GitLab 等。在构建依赖拉取方面，对于包括 Maven、NPM 在内的主流镜像源有专用网络优化，
保证拉取速度，进一步提升构建的速度。</p>
</blockquote>
<h4 id="1352-应用场景---自动构建">1.3.5.2 应用场景 - 自动构建</h4>
<blockquote>
<p>CODING 持续集成可以用于自动构建代码，在用户自定义的构建环境和构建脚本指令下，
基于云端的强大计算能力和网络快速把源代码构建为可运行的目标产物，并存放入构建版本仓库。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e8%87%aa%e5%8a%a8%e6%9e%84%e5%bb%ba.png" alt="">

</p>
<h4 id="1353-应用场景---辅助评审">1.3.5.3 应用场景 - 辅助评审</h4>
<blockquote>
<p>适用于辅助代码评审，代码评审工作繁杂而又重要，应用持续集成能力可以在所有评审工作之前进行全自动的构建、自动化测试、风格检查、质量扫描、安全评估等前置工作，
为后续的评审工作大大减负。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e8%be%85%e5%8a%a9%e8%af%84%e5%ae%a1.png" alt="">

</p>
<h4 id="1354-应用场景---自动化测试">1.3.5.4 应用场景 - 自动化测试</h4>
<blockquote>
<p>DevOps 要求软件交付流程的高度自动化，其中自动化测试工作尤为重要，持续集成可参与项目发布、代码评审、项目验收等环节的自动化测试，为交付流程提高效率。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95.png" alt="">

</p>
<h3 id="136-coding-持续部署">1.3.6 CODING 持续部署</h3>
<h4 id="1361-coding-持续部署简介">1.3.6.1 CODING 持续部署简介</h4>
<blockquote>
<p>CODING 持续部署（CODING Continuous Deployment，CODING-CD）用以管理软件在经过构建之后的发布和部署交付过程，
可以无缝对接上游 Git 仓库、制品仓库实现全自动化部署，同时支持 Webhook 等外部对接能力，方便集成各种开发、运维工具。
在配以合适的技术架构、运维工具的基础上，可以方便的实现蓝绿发布、灰度发布(金丝雀发布)、滚动发布、快速回滚等功能。</p>
</blockquote>
<h4 id="1362-应用场景---全流程管控">1.3.6.2 应用场景 - 全流程管控</h4>
<blockquote>
<p>持续部署是实现 DevOps 闭环的核心流程，CODING 持续部署通过整合上下游，实现 DevOps 全流程管控。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e5%85%a8%e6%b5%81%e7%a8%8b%e7%ae%a1%e6%8e%a7.png" alt="">

</p>
<h4 id="1363-应用场景---灰度发布">1.3.6.3 应用场景 - 灰度发布</h4>
<blockquote>
<p>CODING 持续部署可配以合适的技术架构和运维工具实现蓝绿发布，灰度发布，快速回滚等能力。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e7%81%b0%e5%ba%a6%e5%8f%91%e5%b8%83.png" alt="">

</p>
<h4 id="1364-应用场景---发布审批">1.3.6.4 应用场景 - 发布审批</h4>
<blockquote>
<p>CODING 持续部署支持在发布流程开始前实现多场景的人工和自动化审批。</p>
</blockquote>
<p>
  <img src="/img/posts/2021-09-09/%e5%8f%91%e5%b8%83%e5%ae%a1%e6%89%b9.png" alt="">

</p>
<h3 id="137-概念">1.3.7 概念</h3>
<p>![](/img/posts/2021-09-09/CODING DevOps.png)</p>
<h3 id="138-借鉴">1.3.8 借鉴</h3>
<p>可以借鉴的地方：</p>
<ol>
<li>应用-&gt;部署流程，提供多种部署模版</li>
<li>团队-&gt;项目-&gt;应用的层级结构</li>
<li>CD支持Helm</li>
<li>提供API：项目/项目设置/开发者选项</li>
<li>前端面板控制：项目/项目设置/功能开关</li>
<li>DevOps全家桶（大而全）</li>
</ol>
<h3 id="139-vs-ops发布流程">1.3.9 VS OPS发布流程</h3>
<ol>
<li>
<p>OPS有环境的概念，实际上环境也是对应集群，OPS的多环境实质上是对应一个集群的多个命名空间</p>
<p>CODING支持多集群和单集群多命名空间；</p>
</li>
<li>
<p>应用高级特性支持，CODING支持</p>
</li>
<li>
<p>审批流程差异</p>
<ul>
<li>OPS: dev环境 -&gt; qa环境 -&gt; uat环境 -&gt; 审批(dev审批人、qa审批人、现在审批人) -&gt; live环境</li>
<li>CODING：人工确认 -&gt; dev集群 -&gt; 人工确认-&gt; qa集群 -&gt; 人工确认 -&gt; uat集群 -&gt; 人工确认 -&gt; live集群</li>
<li>CODING：人工确认 -&gt; 集群(dev命名空间) -&gt; 人工确认-&gt; 集群(qa命名空间) -&gt; 人工确认 -&gt; 集群(uat命名空间) -&gt; 人工确认 -&gt; 集群(live命名空间)</li>
</ul>
</li>
<li>
<p>管理层级不一样，OPS是项目的概念，CODING有团队、项目、应用的概念</p>
</li>
</ol>
<h1 id="2-devops-vs-devsecops-vs-gitops-vs-alops-vs-chatops-vs-noops-区别">2. DevOps vs DevSecOps vs GitOps vs AlOps vs ChatOps vs NoOps 区别?</h1>
<h2 id="21-devsecops">2.1 DevSecOps</h2>
<p>DevSecOps采用了传统的DevOps方法，并在工作流程中添加了额外的安全检查、代码验证和深入测试。DevSecOps从流程的一开始就集成了安全性，而不是在周期结束时让安全性成为一个问题。</p>
<p>
  <img src="/img/posts/2021-09-09/devsecops.png" alt="">

</p>
<h2 id="22-gitops">2.2 GitOps</h2>
<h4 id="221-简介">2.2.1 简介</h4>
<blockquote>
<p><a href="https://www.weave.works/technologies/gitops/">GitOps</a> 是Weaveworks提出的一种持续交付方式，
它的核心思想是将应用系统的声明性基础架构和应用程序存放在 Git 版本库中。将Git作为交付流水线的核心，每个开发人员都可以提交拉取请求（Pull Request）并使用 Git 来加速和简化 Kubernetes 的应用程序部署和运维任务。
通过使用像Git这样的简单工具，开发人员可以更高效地将注意力集中在创建新功能而不是运维相关任务上（例如，应用系统安装、配置、迁移等）</p>
</blockquote>
<h4 id="222-应用场景">2.2.2 应用场景</h4>
<p>不管如何选择构造自己的交付流水线，将基于Git（或者其他版本控制工具）的GitOps最佳实践应用在交付流水线中都是一个不二选择，GitOps 也不是万能的，它也有相应的应用场景。</p>
<h4 id="2221-不可变基础设施">2.2.2.1 不可变基础设施</h4>
<blockquote>
<p>应用都需要运行在多台机器上，它们被组织成不同的环境，例如开发环境、测试环境和生产环境等等。
需要将相同的应用部署到不同的机器上。通常需要系统管理员确保所有的机器都处于相同的状态。
接着所有的修改、补丁、升级需要在所有的机器中进行。随着时间的推移，很难再确保所有的机器处于相同的状态，同时越来越容易出错。
这就是传统的可变架构中经常出现的问题。这时我们有了不可变架构，它将整个机器环境打包成一个单一的不可变单元，而不是传统方式仅仅打包应用。
这个单元包含了之前所说的整个环境栈和应用所有的修改、补丁和升级，这就解决了前面的问题。
—— 摘自InfoQ的《关于不可变架构以及为什么需要不可变架构》作者 百占辉</p>
</blockquote>
<p>不可变基础设施这一概念不是刚刚才提出来的，它也不是必须需要容器技术。然而，通过容器，它变得更易于理解，更加实用，
不可变基础设施让我们以全新的方式理解和面对应用系统，尤其是使以微服务为代表的分布式系统在部署、运维等方面变得不那么复杂，而有很好的可控性。</p>
<h4 id="2222-声明性容器编排">2.2.2.2 声明性容器编排</h4>
<p>借助 Kubernetes 的声明性特点，应用系统的整个配置文件集可以在Git库中进行版本控制。
通过使用Git库，应用程序更容易部署到Kubernetes中，以及进行版本回滚。
更重要的是，当灾难发生时，集群的基础架构可以从 Git 库中可靠且快速地恢复。</p>
<p>Kubernetes等云原生工具的声明性体现在可以对实例、容器、网络、存储、CPU 等配置通过一组代码方便的表达出来，
Kubernetes 等云原生工具可以利用这些配置代码运行出来一套基于容器的应用系统。</p>
<p>GitOps充分利用了不可变基础设施和声明性容器编排，通过GitOps可以轻松地管理多个应用部署。为了最大限度地降低部署后的变更风险，无论是有意还是偶然的“配置差异”，
GitOps构建了一个可重复且可靠的部署过程，在整个应用系统宕机或者损坏情况下，为快速且完全恢复提供了所需条件。</p>
<h4 id="223-基本原则">2.2.3 基本原则</h4>
<ul>
<li>
<p><strong>任何能够被描述的内容都必须存储在Git库中</strong>：通过使用Git作为存储声明性基础架构和应用程序代码的存储仓库，可以方便地监控集群，以及检查比较实际环境的状态与代码库上的状态是否一致。
所以，我们的目标是描述系统相关的所有内容：策略，代码，配置，甚至监控事件和版本控制等，并且将这些内容全部存储在版本库中，
在通过版本库中的内容构建系统的基础架构或者应用程序的时候，如果没有成功，则可以迅速的回滚，并且重新来过。</p>
</li>
<li>
<p><strong>不应直接使用kubectl 命令</strong>：一般不提倡在命令行中直接使用kubectl命令操作执行部署基础架构或应用程序到集群中。
还有一些开发者使用 CI 工具驱动应用程序的部署，但如果这样做，可能会给生产环境带来潜在不可预测的风险。</p>
</li>
<li>
<p><strong>调用 Kubernetes的API接口或者控制器应该遵循Operator模式</strong>：集群的状态和Git库中的配置文件等要保持一致，并且查看分析它们之间的状态差异。</p>
</li>
</ul>
<h4 id="224-gitops流水线">2.2.4 GitOps流水线</h4>
<p>
  <img src="/img/posts/2021-09-09/GitOps%e6%b5%81%e6%b0%b4%e7%ba%bf.png" alt="">

</p>
<p>GitOps的<code>Config Updater</code>检测到有镜像更新，从存储库中提取新镜像，然后在 Git 配置仓库中更新其YAML。
然后，GitOps的<code>Deploy Operator</code>会检测到集群中应用已过期，并从配置库中提取已更改的清单，并将新镜像部署到集群中。</p>
<h4 id="325-实现工具">3.2.5 实现工具</h4>
<p>实现 GitOps 中有两个重要的概念：Config Updater和Deploy Operator，这在Kubernetes中通常也是使用Operator来实现的，
目前比较热门的用于实现GitOps的工具有Flux、ArgoCD、Jenkins X。</p>
<p>
  <img src="/img/posts/2021-09-09/flux_argocd_jenkinsx%e5%af%b9%e6%af%94.png" alt="">

</p>
<p>三个工具之间的具体对比参考：<a href="https://blog.container-solutions.com/fluxcd-argocd-jenkins-x-gitops-tools">https://blog.container-solutions.com/fluxcd-argocd-jenkins-x-gitops-tools</a></p>
<h2 id="23-alops">2.3 AlOps</h2>
<blockquote>
<p>根据Gartner的定义，AIOps的主要目标包括：通过采集当前环境中的运维数据，集成现有IT运维管理工具，利用算法等高级数据分析技术对IT系统中各个环节的问题进行快速定位、故障排除和预测；
对来自业务环节中各个分布式系统的数据进行聚合分析，合理优化IT服务，挖掘关键业务的KPI指标，反哺业务端，帮助其做出明智决策；
通过大数据和人工智能技术分析用户的行为日志和运维数据，发掘潜在的系统安全和合规问题，为企业的信息安全保驾护航。</p>
</blockquote>
<p>以发现异常为例，传统IT运维工具中都会采用基于经验值来定义异常阈值，这种方法主要基于人的主观判断。
而基于机器学习的方法，通过积累历史运维数据，根据日常运维的需求在数据特征的基础上建立算法模型，对模型进行周期性地训练学习，
从而能为IT系统提供更为及时、准确、高覆盖的检测结果。比如，传统异常发现的流程是运维人员在系统中创建了业务路径，并对路径中关注的节点或连线进行告警设置。
如数据中心网银交易服务器响应时间告警的设置为&gt;300ms，如果运维软件监测到响应时间超过300ms，系统告警。
而采用AI方法进行异常检测时，运维人员不用对业务路径做任何告警设置，当机器学习算法检测到某个业务路径的某个节点或连线上产生了异常值，就会自动抛出异常事件。</p>
<h2 id="24-chatops">2.4 ChatOps</h2>
<h4 id="241-简介">2.4.1 简介</h4>
<blockquote>
<p>ChatOps以聊天室（聊天群），即实时聊天软件为中心，通过一系列的机器人去对接后台的各种服务，开发&amp;测试&amp;运维人员只需要在聊天窗口中与机器人对话，
即可与后台服务进行交互，整个工作的展开就像是使唤一个智能助手那样简单自然。</p>
</blockquote>
<h4 id="242-优势">2.4.2 优势</h4>
<p>ChatOps的好处：</p>
<ul>
<li>公开透明。所有的工作消息都在同一个聊天平台中沉淀并公开给所有相关成员，消除沟通壁垒，工作历史有迹可循，团队合作更加顺畅。</li>
<li>上下文共享。减少因工作台切换等对消息的截断，保证消息的完整性，让工作承接有序，各角色，各工具都成为完成工作流中的一环，打造真正流畅的工作体验。</li>
<li>移动友好。只需要在前台与预设好的机器人对话即可完成与后台工具、系统的交互，在移动环境下无需再与众多复杂的工具直接对接，大大提升移动办公的可行性。</li>
<li>DevOps 文化打造。用与机器人对话这种简单的方式降低 DevOps 的接受门槛，让这种自动化办公的理念更容易的扩展到团队的每一个角落。</li>
</ul>
<h4 id="243-案例">2.4.3 案例</h4>
<p>ChatOps的理解最早要源于在GitHub上参与开源项目的一些经历，在向Kubernetes相关项目提交PR时，
会有一个名叫k8s-ci-robot的小机器人来自动为该PR打上标签，并且根据你提交PR时的comment信息来为你分配Reviewers，
如果没有填的话，则会自动为你分配 Reviewers 等功能。同时可以在 comment 中输入命令，还可以进行其他的操作。
而其实这个机器人的后端就是名为Prow的由Google发起的适应云原生CI/CD开源项目。
<a href="https://www.servicemesher.com/blog/prow-quick-start-guide/">Prow 快速入门向导</a></p>
<h2 id="25-noops">2.5 NoOps</h2>
<p>NoOps是最早由Forrester创造的一个术语，旨在提高生产力并比 DevOps 更快地交付结果。
在理想情况下，开发人员永远不必与运营团队的成员协作。相反，他们可以使用一组工具和服务，以安全的方式负责任地部署开发所需的云组件，包括代码和基础设施。
托管云服务（如PaaS或无服务器）充当NoOps的支柱，并利用CI/CD作为其部署的核心引擎。因此，请注意，并非所有场景都适合应用 NoOps。</p>
<p>NoOps是DevOps的演变结果，其目标是实现高度自动化的完美最终状态。</p>
<h1 id="3-我们的方案">3. 我们的方案</h1>
<p>选择KubeSphere为底座</p>
<ul>
<li>流水线并发构建</li>
<li>构建流水可视化、可编辑</li>
<li>容器平台底座也是KubeSphere（WiseCloud、CODING不开源）</li>
<li>流水线以Jenkins为核心，深度集成Jenkins（Erda pipeline自研）</li>
<li>发布策略、多版本（这部分工作需开发，下沉到k8s，新抽象一种工作负载）
![](/img/posts/2021-09-09/CI_CD v2.0.png)</li>
</ul>
<p>流水线流程图：
![](/img/posts/2021-09-09/CI_CD v2.0流程图.png)</p>
<h1 id="4-参考链接">4. 参考链接</h1>
<ul>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzAwNTM5Njk3Mw==&amp;mid=2247502740&amp;idx=1&amp;sn=f576b8bd5cfb4ce1170fe1839427665e&amp;chksm=9b1fcb16ac6842003d8307a6c3b6ba554c83ea6cd43d774eb8019109cb10edccb5c603daa8a4&amp;scene=132&amp;st=0E1C648414C9A1969A0590AEDBF34DB6AA87F139CE1D4CE72578D8C50E08A02AF19223CA99C42D134960D80238565FD0F0CCE7CCC3476C01D07712336D8723FE999F65E9E61F54AFB7E023206060FB271CA487EC52CF21CE14785D77C11B22EF25104FAF32CCA2F1162A87A3EE3BF36660EDA3674611E9D9DF09E561953965B1D079A8431A68D40D53A8D3AF9CF9B9BB5D837773CCE17472EBBAD06A2316DF5ADF356F3247A5C3413F3267C1EB921117&amp;vid=1688850092204163&amp;cst=E27F9BE826B233EEDD93ECAA41C57AC288FB486D72EA8E03CDD7876CA981B79D28F5FDFBE61FAC7ED0DEA32E59372AAD&amp;deviceid=efbe9abf-2049-4fb7-b691-abecd256e4e9&amp;version=3.1.12.90282&amp;platform=mac#wechat_redirect">Jenkins Pipeline 流水线部署 Kubernetes 应用</a></li>
<li><a href="https://www.qikqiak.com/k8strain2/devops/gitops/overview/#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99">GitOps 是什么？</a></li>
<li><a href="https://docs.erda.cloud/1.2/manual/dop/examples/project-management.html">Erda DevOps</a></li>
<li><a href="https://cloud.tencent.com/product/coding">CODING DevOps</a></li>
<li><a href="https://v2-1.docs.kubesphere.io/docs/zh-CN/system-settings/edit-system-settings/">KubeSphere官方文档</a></li>
<li><a href="https://cloudnative.to/blog/gitops-and-chatops/">Git Ops与 Chat Ops的落地实践</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1752454">DevOps和它的朋友们——聊聊其他 “Ops”（一）</a></li>
</ul>


                
                
<div class="entry-shang text-center">
    
	    <p>「真诚赞赏，手留余香」</p>
	
	<button class="zs show-zs btn btn-bred">赞赏支持</button>
</div>
<div class="zs-modal-bg"></div>
<div class="zs-modal-box">
	<div class="zs-modal-head">
		<button type="button" class="close">×</button>
		<span class="author"><a href="https://www.iceyao.com.cn/"><img src="/img/favicon.png" />爱折腾的工程师</a></span>
        
	        <p class="tip"><i></i><span>真诚赞赏，手留余香</span></p>
		
 
	</div>
	<div class="zs-modal-body">
		<div class="zs-modal-btns">
			<button class="btn btn-blink" data-num="2">2元</button>
			<button class="btn btn-blink" data-num="5">5元</button>
			<button class="btn btn-blink" data-num="10">10元</button>
			<button class="btn btn-blink" data-num="50">50元</button>
			<button class="btn btn-blink" data-num="100">100元</button>
			<button class="btn btn-blink" data-num="1">任意金额</button>
		</div>
		<div class="zs-modal-pay">
			<button class="btn btn-bred" id="pay-text">2元</button>
			<p>使用<span id="pay-type">微信</span>扫描二维码完成支付</p>
			<img src="/img/reward/wechat-2.png"  id="pay-image"/>
		</div>
	</div>
	<div class="zs-modal-footer">
		<label><input type="radio" name="zs-type" value="wechat" class="zs-type" checked="checked"><span ><span class="zs-wechat"><img src="/img/reward/wechat-btn.png"/></span></label>
		<label><input type="radio" name="zs-type" value="alipay" class="zs-type" class="zs-alipay"><img src="/img/reward/alipay-btn.png"/></span></label>
	</div>
</div>
<script type="text/javascript" src="/js/reward.js"></script>

                

                
                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/post/2021-08-31-prototype_learing_note/" data-toggle="tooltip" data-placement="top" title="画产品原型图学习笔记">&larr;
                            Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/post/2021-09-15-manage_vcenter/" data-toggle="tooltip" data-placement="top" title="云管纳管vCenter">Next
                            Post &rarr;</a>
                    </li>
                    
                </ul>
                

                


<script src="https://giscus.app/client.js"
        data-repo="yaoice/yaoice.github.io"
        data-repo-id="R_kgDOJnxqVg"
        data-category="General"
        data-category-id="DIC_kwDOJnxqVs4CWwUs"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>


            </div>

            
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        <a href="/tags/devops" title="devops">
                            devops
                        </a>
                        
                        
                        
                        <a href="/tags/go" title="go">
                            go
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/k8s" title="k8s">
                            k8s
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/llm" title="llm">
                            llm
                        </a>
                        
                        
                        
                        <a href="/tags/openstack" title="openstack">
                            openstack
                        </a>
                        
                        
                        
                        
                        
                        <a href="/tags/tkestack" title="tkestack">
                            tkestack
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/%E7%BB%83%E8%BD%A6" title="练车">
                            练车
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>









<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">                  
                    
                    <li>
                        <a href="mailto:yao3690093@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		           
                    
                    
                    
                    

		            
                    
                    <li>
                        <a target="_blank" href="/img/wechat.jpeg">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-weixin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    <li>
                        <a target="_blank" href="https://github.com/yaoice">
                            <span class="fa-stack fa-lg">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		            
                    
                    
                    
                    
                    
                    
                    
                    
                    
            
            
            
           
                   <li>
                       <a href="/index.xml" rel="alternate" type="application/rss+xml" title="爱折腾的工程师" >
                           <span class="fa-stack fa-lg">
                               <i class="fas fa-circle fa-stack-2x"></i>
                               <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
            
             </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 爱折腾的工程师 2026
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function loadAsync(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        loadAsync("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>



<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https'){
       bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else{
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>


<script>
    
    var _baId = '92c175994ded75a3cd2074bc1123e2be';

    
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>




<script type="text/javascript">
    function generateCatalog(selector) {

        
        
        
        
            _containerSelector = 'div.post-container'
        

        
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        
        $(selector).html('')

        
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    


    loadAsync("\/js\/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>







</body>
</html>
